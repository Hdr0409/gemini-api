<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot Gemini</title>
    <style>
      body {
        font-family: Arial;
        padding: 20px;
      }
      #chat {
        border: 1px solid #ccc;
        padding: 10px;
        height: 300px;
        overflow-y: auto;
      }
      input {
        width: 80%;
        padding: 10px;
      }
      button {
        padding: 10px;
      }
    </style>
  </head>

  <body>
    <h2>Chatbot Gemini</h2>

    <div id="chat"></div>
    <br />

    <input id="msg" placeholder="Tulis pesan..." />
    <button onclick="send()">Kirim</button>

    <script>
      function addMessage(sender, text) {
        const box = document.getElementById("chat");

        box.innerHTML += `
          <div style="
            margin-bottom:12px;
            padding:10px;
            border-radius:10px;
            background:${sender === "AI" ? "#e8f5e9" : "#e3f2fd"};
          ">
            <b>${sender}:</b><br>${text}
          </div>
        `;
      }

      async function send() {
        const input = document.getElementById("msg");
        const message = input.value;
        if (!message.trim()) return;

        addMessage("Kamu", message);

        const res = await fetch("http://localhost:3000/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message }),
        });

        const data = await res.json();
        addMessage("AI", data.reply);

        input.value = "";
      }
    </script>
  </body>
</html>
